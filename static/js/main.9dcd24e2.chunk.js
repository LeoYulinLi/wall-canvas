(this["webpackJsonpwall-canvas"]=this["webpackJsonpwall-canvas"]||[]).push([[0],{108:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);var r=a(4),n=a(0),c=a.n(n),i=a(18),o=a.n(i),l=(a(108),a(39)),s=a.n(l),u=a(225),d=a(14),h=a.p+"static/media/Tileable_Red_Brick_Texturise_NORMAL.13f500e2.jpg",f=a.p+"static/media/Tileable_Red_Brick_Texturise.fdc6adbf.jpg",j=a(95),b=a.n(j),p=a(62),g=a.n(p),v=a(63),x=a.n(v),O=a(26),m=a.n(O),w=a(102),C=a(227),_=a(228),k=a(226),y=function(e){var t=e.strokeColor,a=e.setStrokeColor,c=e.strokeWidth,i=e.setStrokeWidth,o=e.clearDrawing,l=e.saveDrawing,s=Object(n.useState)(!1),u=Object(d.a)(s,2),h=u[0],f=u[1];return Object(r.jsxs)("div",{className:m.a.palette,children:[Object(r.jsx)(w.a,{onChange:function(e){return a(e.hex)},color:t,colors:["#000000","#ffffff","#d00000","#ea8c00","#eac300","#00a000","#b7ea00","#0000c0","#00c7ea","#7500ea","#bf00ea","#ea00b0","#555555","#d2d2d2","#ffc6c6","#ffd999","#fff0ab","#adffad","#ecffb2","#9ad7ff","#9affe8","#9d9aff","#e4a8f3","#ff9ae6"],className:m.a.colorPicker}),Object(r.jsx)(C.a,{children:Object(r.jsxs)(C.a.Group,{controlId:"strokeWidth",className:m.a.strokePicker,children:[Object(r.jsxs)(C.a.Label,{children:["Stroke Width: ",c]}),Object(r.jsx)(C.a.Control,{type:"range",min:5,max:60,custom:!0,value:c,onChange:function(e){return i(+e.target.value)}})]})}),Object(r.jsxs)("div",{className:m.a.control,children:[Object(r.jsx)(_.a,{type:"button",variant:"danger",onClick:function(){return f(!0)},children:"Clear Drawing"}),Object(r.jsx)(_.a,{type:"button",onClick:l,children:"Save Drawing"})]}),Object(r.jsxs)(k.a,{show:h,onHide:function(){return f(!1)},centered:!0,children:[Object(r.jsx)(k.a.Header,{closeButton:!0,children:Object(r.jsx)(k.a.Title,{children:"Clear Drawing"})}),Object(r.jsx)(k.a.Body,{children:"Are you sure you want to clear the current drawing? This action cannot be undone."}),Object(r.jsxs)(k.a.Footer,{children:[Object(r.jsx)(_.a,{variant:"secondary",onClick:function(){return f(!1)},children:"Close"}),Object(r.jsx)(_.a,{variant:"danger",onClick:function(){o(),f(!1)},children:"Clear Drawing"})]})]})]})},D=a(9);function S(e){var t=Math.sqrt(e.reduce((function(e,t){return e+t*t}),0));return e.map((function(e){return e/t}))}function P(e,t){for(var a=0,r=0;r<e.length;r++)a+=e[r]*t[r];return a}function M(e,t,a){for(var r=[],n=function(e,t){var a=t.x-e.x,r=t.y-e.y;return Math.sqrt(a*a+r*r)}(e,t),c=function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)}(e,t),i=e.x,o=e.y,l=0;l<n;l+=a)r.push({x:i+Math.sin(c)*l,y:o+Math.cos(c)*l});return r}var R=function(e){var t=window.devicePixelRatio,a=e.canvasWidth,c=e.canvasHeight,i=Object(n.useRef)(null),o=Object(n.useRef)(document.createElement("canvas")),l=Object(n.useRef)(document.createElement("canvas")),s=Object(n.useRef)(document.createElement("img")),u=Object(n.useRef)(document.createElement("img")),j=Object(n.useState)(null),p=Object(d.a)(j,2),v=p[0],O=p[1],m=Object(n.useState)([]),w=Object(d.a)(m,2),C=w[0],_=w[1],k=Object(n.useState)([]),R=Object(d.a)(k,2),I=R[0],E=R[1],H=Object(n.useState)(!1),N=Object(d.a)(H,2),A=N[0],B=N[1],W=Object(n.useState)({width:Math.floor(a*t),height:Math.floor(c*t)}),L=Object(d.a)(W,2),T=L[0],F=(L[1],Object(n.useState)("#9AFFE8")),G=Object(d.a)(F,2),Y=G[0],q=G[1],U=Object(n.useState)(40),X=Object(d.a)(U,2),J=X[0],K=X[1],V=Object(n.useState)({prev:null,current:null}),Z=Object(d.a)(V,2),z=Z[0],Q=Z[1],$=Object(n.useCallback)(b()(Q,20),[]);return Object(n.useEffect)((function(){if(i.current){var e;null===(e=i.current)||void 0===e||e.appendChild(o.current);var a=T.width,r=T.height;o.current.height=r,o.current.width=a,o.current.setAttribute("style","width: ".concat(a/t,"px; max-width: 100%"))}}),[i.current]),Object(n.useEffect)((function(){s.current.src=h,s.current.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d"),a=l.current.getContext("2d");if(t&&a){var r=T.width,n=T.height;e.width=r,e.height=n;var c=t.createPattern(s.current,"repeat");if(c){t.fillStyle=c,t.fillRect(0,0,r,n);for(var i=t.getImageData(0,0,r,n),o=i.data,u=[],d=[],h=S([1,3,6]),f=[0,0,1],j=0;j<o.length;j+=4){var b=S([o[j]-128,o[j+1]-128,o[j+2]-128]),p=P(b,h);u.push(p);for(var g=[],v=0;v<3;v++)g[v]=2*p*(b[v]-h[v]);var x=P(S(g),f);d.push(Math.pow(x,3)),o[j]=Math.floor(255*p),o[j+1]=Math.floor(255*p),o[j+2]=Math.floor(255*p)}_(u),E(d),l.current.width=r,l.current.height=n,a.putImageData(i,0,0),a.lineCap="round";for(var O=a.getImageData(0,0,r,n),m=O.data,w=0;w<m.length;w+=4)m[w+3]=0;a.putImageData(O,0,0,0,0,r,n)}}}}),[T]),Object(n.useEffect)((function(){u.current.src=f,u.current.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d");if(t){var a=T.width,r=T.height;e.width=a,e.height=r;var n=t.createPattern(u.current,"repeat");if(n){t.fillStyle=n,t.fillRect(0,0,a,r);var c=t.getImageData(0,0,a,r);O(c.data)}}}}),[T]),Object(n.useEffect)((function(){o.current.onpointermove=function(e){if(e.preventDefault(),A){var t=o.current.getBoundingClientRect(),a=o.current.width/t.width,r=o.current.height/t.height;$((function(n){return{prev:n.current,current:{x:Math.floor((e.clientX-t.left)*a),y:Math.floor((e.clientY-t.top)*r)}}}))}},o.current.ontouchmove=function(e){if(e.preventDefault(),A){var t=o.current.getBoundingClientRect(),a=o.current.width/t.width,r=o.current.height/t.height,n=e.touches[0].clientX,c=e.touches[0].clientY;$((function(e){return{prev:e.current,current:{x:Math.floor((n-t.left)*a),y:Math.floor((c-t.top)*r)}}}))}}}),[o.current,A]),Object(n.useEffect)((function(){o.current.onpointerdown=function(e){e.preventDefault(),B(!0)};var e=function(e){e.preventDefault(),B(!1),$((function(e){return{prev:e.current,current:null}}))};o.current.ontouchend=e,o.current.onpointerup=e}),[]),Object(n.useEffect)((function(){var e=o.current.getContext("2d");if(0!==C.length&&v&&e){for(var t=T.width,a=T.height,r=e.getImageData(0,0,t,a),n=r.data,c=0;c<v.length/4;c++)v[4*c]=v[4*c]*C[c],v[4*c+1]=v[4*c+1]*C[c],v[4*c+2]=v[4*c+2]*C[c];for(var i=0;i<v.length;i++)n[i]=v[i];e.putImageData(r,0,0,0,0,t,a)}}),[C,v]),Object(n.useEffect)((function(){var e=l.current.getContext("2d"),t=o.current.getContext("2d");if(e&&t&&z.prev&&z.current&&v){var a=z.prev,r=z.current;M(a,r,J/4).forEach((function(t){var a=t.x,r=t.y,n=e.createRadialGradient(a,r,0,a,r,J);n.addColorStop(0,Y),n.addColorStop(.5,g()(Y,.3)),n.addColorStop(1,g()(Y,0)),e.fillStyle=n,e.fillRect(a-J,r-J,2*J,2*J)}));for(var n=a.x,c=a.y,i=r.x,s=r.y,u=(n<i?n:i)-J,d=(c<s?c:s)-J,h=(n<i?i:n)-u+J,f=(c<s?s:c)-d+J,j=T.width,b=T.height,p=e.getImageData(0,0,j,b).data,x=t.getImageData(0,0,j,b),O=x.data,m=0;m<h*f;m++){var w=u+m%h+(d+Math.floor(m/h))*j,_=p[4*w+3]/255,k=_*I[w]*2e3,y={r:_*(8+p[4*w])*C[w],g:_*(8+p[4*w+1])*C[w],b:_*(8+p[4*w+2])*C[w]};O[4*w]=y.r+k+(1-_)*v[4*w],O[4*w+1]=y.g+k+(1-_)*v[4*w+1],O[4*w+2]=y.b+k+(1-_)*v[4*w+2]}t.putImageData(x,0,0,0,0,j,b)}}),[l.current,v,o.current,z]),Object(r.jsxs)("div",{className:x.a.panel,children:[Object(r.jsx)("div",{className:x.a.canvasContainer,ref:i}),Object(r.jsx)(y,{strokeColor:Y,setStrokeColor:q,strokeWidth:J,setStrokeWidth:K,clearDrawing:function(){if(v){var e=T.width,t=T.height,a=l.current.getContext("2d"),r=o.current.getContext("2d");if(a&&r){for(var n=a.getImageData(0,0,e,t),c=n.data,i=r.getImageData(0,0,e,t),s=i.data,u=0;u<c.length;u++)c[u]=0;a.putImageData(n,0,0,0,0,e,t);for(var d=0;d<v.length;d++)s[d]=v[d];r.putImageData(i,0,0,0,0,e,t)}}},saveDrawing:function(){var e=document.createElement("a");e.href=o.current.toDataURL("image/png").replace("data:image/png","data:application/octet-stream"),e.download="drawing.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}),Object(r.jsx)(D.a,{message:"Your changes will not be saved. Are you sure you want to navigate away?"})]})},I=a(21),E=function(){return Object(r.jsxs)(u.a,{className:s.a.appContainer,children:[Object(r.jsxs)("div",{className:s.a.appHeader,children:[Object(r.jsx)("h1",{children:"Wall Canvas"}),Object(r.jsx)("p",{children:"A Graffiti Wall Canvas where Paints Look Like Actual Paints"}),Object(r.jsxs)("ul",{className:s.a.nav,children:[Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"https://github.com/LeoYulinLi/wall-canvas",target:"_blank",rel:"noopener noreferrer",children:"Source Code and Behind the Scene"})}),Object(r.jsx)("li",{children:Object(r.jsx)(I.b,{to:"/credits",children:"Credits"})})]})]}),Object(r.jsx)(R,{canvasWidth:screen.width>800?800:screen.width,canvasHeight:screen.height-100>600?600:screen.height-100})]})},H=a(67),N=a.n(H),A=function(){return Object(r.jsxs)(u.a,{className:N.a.creditContainer,children:[Object(r.jsxs)("div",{className:N.a.creditHeader,children:[Object(r.jsx)("h1",{children:"Credits / Resources Used"}),Object(r.jsx)(I.b,{to:"/",children:"Go back to Home Page"})]}),Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:["Favicon: Icons made by ",Object(r.jsx)("a",{href:"https://www.flaticon.com/authors/pixel-perfect",title:"Pixel perfect",children:"Pixel perfect"})," from ",Object(r.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(r.jsxs)("li",{children:["Bootstrap Theme: ",Object(r.jsx)("a",{href:"https://bootswatch.com/sketchy",children:"Bootswatch Sketchy"})]}),Object(r.jsxs)("li",{children:["Brush Style: ",Object(r.jsx)("a",{href:"http://perfectionkills.com/exploring-canvas-drawing-techniques/",children:"Exploring canvas drawing techniques"})]}),Object(r.jsxs)("li",{children:["Reflection Model: ",Object(r.jsx)("a",{href:"https://en.wikipedia.org/wiki/Phong_reflection_model",children:"Phong reflection model"})]})]})]})};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(I.a,{children:Object(r.jsxs)(D.d,{children:[Object(r.jsx)(D.b,{exact:!0,path:"/",component:E}),Object(r.jsx)(D.b,{exact:!0,path:"/credits",component:A})]})})}),document.getElementById("root"))},26:function(e,t,a){e.exports={palette:"Palette_palette__3tLi0",strokePicker:"Palette_strokePicker__25ejT",colorPicker:"Palette_colorPicker__1HHU9",control:"Palette_control__2I8aI"}},39:function(e,t,a){e.exports={appContainer:"App_appContainer__19Cyd",appHeader:"App_appHeader__iN9K5",nav:"App_nav__2XUeY"}},63:function(e,t,a){e.exports={panel:"Panel_panel__3VGf8",canvasContainer:"Panel_canvasContainer__3gM-_"}},67:function(e,t,a){e.exports={creditContainer:"Credits_creditContainer__1ZAnL",creditHeader:"Credits_creditHeader__1FGRR"}}},[[222,1,2]]]);
//# sourceMappingURL=main.9dcd24e2.chunk.js.map