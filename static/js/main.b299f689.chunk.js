(this["webpackJsonpwall-canvas"]=this["webpackJsonpwall-canvas"]||[]).push([[0],{103:function(e,t,a){},21:function(e,t,a){e.exports={panel:"Panel_panel__3VGf8",canvasContainer:"Panel_canvasContainer__3gM-_",palette:"Panel_palette__1ah10",strokePicker:"Panel_strokePicker__2CgvM",colorPicker:"Panel_colorPicker__28cFV"}},217:function(e,t,a){"use strict";a.r(t);var r=a(7),n=a(0),c=a.n(n),o=a(88),i=a.n(o),u=(a(103),a(56)),l=a.n(u),f=a(219),d=a(16),s=a.p+"static/media/Tileable_Red_Brick_Texturise_NORMAL.13f500e2.jpg",h=a.p+"static/media/Tileable_Red_Brick_Texturise.fdc6adbf.jpg",g=a(89),p=a.n(g),v=a(57),j=a.n(v),b=a(96),m=a(220),O=a(221),x=a(21),C=a.n(x),w=function(e){var t=e.strokeColor,a=e.setStrokeColor,n=e.strokeWidth,c=e.setStrokeWidth,o=e.clearDrawing,i=e.saveDrawing;return Object(r.jsxs)("div",{className:C.a.palette,children:[Object(r.jsx)(b.a,{onChange:function(e){return a(e.hex)},color:t,colors:["#000000","#ffffff","#d00000","#ea8c00","#eac300","#00a000","#b7ea00","#0000c0","#00c7ea","#7500ea","#bf00ea","#ea00b0","#555555","#d2d2d2","#ffc6c6","#ffd999","#fff0ab","#adffad","#ecffb2","#9ad7ff","#9affe8","#9d9aff","#e4a8f3","#ff9ae6"],className:C.a.colorPicker}),Object(r.jsx)(m.a,{children:Object(r.jsxs)(m.a.Group,{controlId:"strokeWidth",className:C.a.strokePicker,children:[Object(r.jsxs)(m.a.Label,{children:["Stroke Width: ",n]}),Object(r.jsx)(m.a.Control,{type:"range",min:5,max:60,custom:!0,value:n,onChange:function(e){return c(+e.target.value)}})]})}),Object(r.jsx)(O.a,{type:"button",variant:"danger",onClick:o,children:"Clear Drawing"}),Object(r.jsx)(O.a,{type:"button",onClick:i,children:"Save Drawing"})]})};function _(e){var t=Math.sqrt(e.reduce((function(e,t){return e+t*t}),0));return e.map((function(e){return e/t}))}function k(e,t){for(var a=0,r=0;r<e.length;r++)a+=e[r]*t[r];return a}function D(e,t,a){for(var r=[],n=function(e,t){var a=t.x-e.x,r=t.y-e.y;return Math.sqrt(a*a+r*r)}(e,t),c=function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)}(e,t),o=e.x,i=e.y,u=0;u<n;u+=a)r.push({x:o+Math.sin(c)*u,y:i+Math.cos(c)*u});return r}var y=function(e){var t=window.devicePixelRatio,a=e.canvasWidth,c=e.canvasHeight,o=Object(n.useRef)(null),i=Object(n.useRef)(document.createElement("canvas")),u=Object(n.useRef)(document.createElement("canvas")),l=Object(n.useRef)(document.createElement("img")),f=Object(n.useRef)(document.createElement("img")),g=Object(n.useState)(null),v=Object(d.a)(g,2),b=v[0],m=v[1],O=Object(n.useState)([]),x=Object(d.a)(O,2),y=x[0],S=x[1],M=Object(n.useState)([]),E=Object(d.a)(M,2),I=E[0],R=E[1],P=Object(n.useState)(!1),N=Object(d.a)(P,2),W=N[0],A=N[1],B=Object(n.useState)({width:Math.floor(a*t),height:Math.floor(c*t)}),H=Object(d.a)(B,2),T=H[0],F=(H[1],Object(n.useState)("#9AFFE8")),G=Object(d.a)(F,2),L=G[0],q=G[1],J=Object(n.useState)(40),V=Object(d.a)(J,2),X=V[0],Y=V[1],K=Object(n.useState)({prev:null,current:null}),U=Object(d.a)(K,2),z=U[0],Q=U[1],Z=Object(n.useCallback)(p()(Q,20),[]);return Object(n.useEffect)((function(){if(o.current){var e;null===(e=o.current)||void 0===e||e.appendChild(i.current);var a=T.width,r=T.height;i.current.height=r,i.current.width=a,i.current.setAttribute("style","width: ".concat(a/t,"px; max-width: 100%"))}}),[o.current]),Object(n.useEffect)((function(){l.current.src=s,l.current.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d"),a=u.current.getContext("2d");if(t&&a){var r=T.width,n=T.height;e.width=r,e.height=n;var c=t.createPattern(l.current,"repeat");if(c){t.fillStyle=c,t.fillRect(0,0,r,n);for(var o=t.getImageData(0,0,r,n),i=o.data,f=[],d=[],s=_([1,3,6]),h=[0,0,1],g=0;g<i.length;g+=4){var p=_([i[g]-128,i[g+1]-128,i[g+2]-128]),v=k(p,s);f.push(v);for(var j=[],b=0;b<3;b++)j[b]=2*v*(p[b]-s[b]);var m=k(_(j),h);d.push(Math.pow(m,3)),i[g]=Math.floor(255*v),i[g+1]=Math.floor(255*v),i[g+2]=Math.floor(255*v)}S(f),R(d),u.current.width=r,u.current.height=n,a.putImageData(o,0,0),a.lineCap="round";for(var O=a.getImageData(0,0,r,n),x=O.data,C=0;C<x.length;C+=4)x[C+3]=0;a.putImageData(O,0,0,0,0,r,n)}}}}),[T]),Object(n.useEffect)((function(){f.current.src=h,f.current.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d");if(t){var a=T.width,r=T.height;e.width=a,e.height=r;var n=t.createPattern(f.current,"repeat");if(n){t.fillStyle=n,t.fillRect(0,0,a,r);var c=t.getImageData(0,0,a,r);m(c.data)}}}}),[T]),Object(n.useEffect)((function(){i.current.onpointermove=function(e){if(e.preventDefault(),W){var t=i.current.getBoundingClientRect(),a=i.current.width/t.width,r=i.current.height/t.height;Z((function(n){return{prev:n.current,current:{x:Math.floor((e.clientX-t.left)*a),y:Math.floor((e.clientY-t.top)*r)}}}))}},i.current.ontouchmove=function(e){if(e.preventDefault(),W){var t=i.current.getBoundingClientRect(),a=i.current.width/t.width,r=i.current.height/t.height,n=e.touches[0].clientX,c=e.touches[0].clientY;Z((function(e){return{prev:e.current,current:{x:Math.floor((n-t.left)*a),y:Math.floor((c-t.top)*r)}}}))}}}),[i.current,W]),Object(n.useEffect)((function(){i.current.onpointerdown=function(e){e.preventDefault(),console.log("mousedown"),A(!0)};var e=function(e){e.preventDefault(),console.log("mouseup"),A(!1),Z((function(e){return{prev:e.current,current:null}}))};i.current.ontouchend=e,i.current.onpointerup=e}),[]),Object(n.useEffect)((function(){var e=i.current.getContext("2d");if(0!==y.length&&b&&e){for(var t=T.width,a=T.height,r=e.getImageData(0,0,t,a),n=r.data,c=0;c<b.length/4;c++)b[4*c]=b[4*c]*y[c],b[4*c+1]=b[4*c+1]*y[c],b[4*c+2]=b[4*c+2]*y[c];for(var o=0;o<b.length;o++)n[o]=b[o];e.putImageData(r,0,0,0,0,t,a)}}),[y,b]),Object(n.useEffect)((function(){var e=u.current.getContext("2d"),t=i.current.getContext("2d");if(e&&t&&z.prev&&z.current&&b){var a=z.prev,r=z.current;D(a,r,X/4).forEach((function(t){var a=t.x,r=t.y,n=e.createRadialGradient(a,r,0,a,r,X);n.addColorStop(0,L),n.addColorStop(.5,j()(L,.3)),n.addColorStop(1,j()(L,0)),e.fillStyle=n,e.fillRect(a-X,r-X,2*X,2*X)}));for(var n=a.x,c=a.y,o=r.x,l=r.y,f=(n<o?n:o)-X,d=(c<l?c:l)-X,s=(n<o?o:n)-f+X,h=(c<l?l:c)-d+X,g=T.width,p=T.height,v=e.getImageData(0,0,g,p).data,m=t.getImageData(0,0,g,p),O=m.data,x=0;x<s*h;x++){var C=f+x%s+(d+Math.floor(x/s))*g,w=v[4*C+3]/255,_=w*I[C]*2e3,k={r:w*(8+v[4*C])*y[C],g:w*(8+v[4*C+1])*y[C],b:w*(8+v[4*C+2])*y[C]};O[4*C]=k.r+_+(1-w)*b[4*C],O[4*C+1]=k.g+_+(1-w)*b[4*C+1],O[4*C+2]=k.b+_+(1-w)*b[4*C+2]}t.putImageData(m,0,0,0,0,g,p)}}),[u.current,b,i.current,z]),Object(r.jsxs)("div",{className:C.a.panel,children:[Object(r.jsx)("div",{className:C.a.canvasContainer,ref:o}),Object(r.jsx)(w,{strokeColor:L,setStrokeColor:q,strokeWidth:X,setStrokeWidth:Y,clearDrawing:function(){if(b){var e=T.width,t=T.height,a=u.current.getContext("2d"),r=i.current.getContext("2d");if(a&&r){for(var n=a.getImageData(0,0,e,t),c=n.data,o=r.getImageData(0,0,e,t),l=o.data,f=0;f<c.length;f++)c[f]=0;a.putImageData(n,0,0,0,0,e,t);for(var d=0;d<b.length;d++)l[d]=b[d];r.putImageData(o,0,0,0,0,e,t)}}},saveDrawing:function(){var e=document.createElement("a");e.href=i.current.toDataURL("image/png").replace("data:image/png","data:application/octet-stream"),e.download="drawing.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}})]})},S=function(){return Object(r.jsxs)(f.a,{className:l.a.appContainer,children:[Object(r.jsx)("h1",{className:l.a.appHeader,children:"Wall Canvas"}),Object(r.jsx)(y,{canvasWidth:screen.width>800?800:screen.width,canvasHeight:screen.height-100>600?600:screen.height-100})]})},M=a(94),E=a(9);i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(M.a,{children:Object(r.jsx)(E.c,{children:Object(r.jsx)(E.a,{exact:!0,path:"/",component:S})})})}),document.getElementById("root"))},56:function(e,t,a){e.exports={appContainer:"App_appContainer__19Cyd",appHeader:"App_appHeader__iN9K5"}}},[[217,1,2]]]);
//# sourceMappingURL=main.b299f689.chunk.js.map