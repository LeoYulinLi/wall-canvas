(this["webpackJsonpwall-canvas"]=this["webpackJsonpwall-canvas"]||[]).push([[0],{17:function(e,t,a){e.exports={panel:"Panel_panel__3VGf8",canvasContainer:"Panel_canvasContainer__3gM-_",palette:"Panel_palette__1ah10",strokePicker:"Panel_strokePicker__2CgvM",colorPicker:"Panel_colorPicker__28cFV"}},205:function(e,t,a){"use strict";a.r(t);var r=a(8),n=a(0),c=a.n(n),i=a(80),o=a.n(i),u=(a(93),a(51)),l=a.n(u),f=a(207),d=a(12),s=a.p+"static/media/Tileable_Red_Brick_Texturise_NORMAL.13f500e2.jpg",h=a.p+"static/media/Tileable_Red_Brick_Texturise.fdc6adbf.jpg",g=a(81),p=a.n(g),v=a(52),b=a.n(v),j=a(86),m=a(208),O=a(209),x=a(17),w=a.n(x),C=function(e){var t=e.strokeColor,a=e.setStrokeColor,n=e.strokeWidth,c=e.setStrokeWidth,i=e.clearDrawing,o=e.saveDrawing;return Object(r.jsxs)("div",{className:w.a.palette,children:[Object(r.jsx)(j.a,{onChange:function(e){return a(e.hex)},color:t,colors:["#000000","#ffffff","#d00000","#ea8c00","#eac300","#00a000","#b7ea00","#0000c0","#00c7ea","#7500ea","#bf00ea","#ea00b0","#555555","#d2d2d2","#ffc6c6","#ffd999","#fff0ab","#adffad","#ecffb2","#9ad7ff","#9affe8","#9d9aff","#e4a8f3","#ff9ae6"],className:w.a.colorPicker}),Object(r.jsx)(m.a,{children:Object(r.jsxs)(m.a.Group,{controlId:"strokeWidth",className:w.a.strokePicker,children:[Object(r.jsxs)(m.a.Label,{children:["Stroke Width: ",n]}),Object(r.jsx)(m.a.Control,{type:"range",min:5,max:60,custom:!0,value:n,onChange:function(e){return c(+e.target.value)}})]})}),Object(r.jsx)(O.a,{type:"button",variant:"danger",onClick:i,children:"Clear Drawing"}),Object(r.jsx)(O.a,{type:"button",onClick:o,children:"Save Drawing"})]})};function _(e){var t=Math.sqrt(e.reduce((function(e,t){return e+t*t}),0));return e.map((function(e){return e/t}))}function k(e,t){for(var a=0,r=0;r<e.length;r++)a+=e[r]*t[r];return a}function D(e,t,a){for(var r=[],n=function(e,t){var a=t.x-e.x,r=t.y-e.y;return Math.sqrt(a*a+r*r)}(e,t),c=function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)}(e,t),i=e.x,o=e.y,u=0;u<n;u+=a)r.push({x:i+Math.sin(c)*u,y:o+Math.cos(c)*u});return r}var y=function(e){var t=window.devicePixelRatio,a=e.canvasWidth,c=e.canvasHeight,i=Object(n.useRef)(null),o=Object(n.useRef)(document.createElement("canvas")),u=Object(n.useRef)(document.createElement("canvas")),l=Object(n.useRef)(document.createElement("img")),f=Object(n.useRef)(document.createElement("img")),g=Object(n.useState)(null),v=Object(d.a)(g,2),j=v[0],m=v[1],O=Object(n.useState)([]),x=Object(d.a)(O,2),y=x[0],S=x[1],E=Object(n.useState)([]),R=Object(d.a)(E,2),I=R[0],P=R[1],M=Object(n.useState)(!1),N=Object(d.a)(M,2),W=N[0],A=N[1],B=Object(n.useState)({width:a*t,height:c*t}),H=Object(d.a)(B,2),T=H[0],F=(H[1],Object(n.useState)("#9AFFE8")),G=Object(d.a)(F,2),L=G[0],q=G[1],J=Object(n.useState)(40),V=Object(d.a)(J,2),X=V[0],Y=V[1],K=Object(n.useState)({prev:null,current:null}),U=Object(d.a)(K,2),z=U[0],Q=U[1],Z=Object(n.useCallback)(p()(Q,20),[]);return Object(n.useEffect)((function(){if(i.current){var e;null===(e=i.current)||void 0===e||e.appendChild(o.current);var t=T.width,a=T.height;o.current.height=a,o.current.width=t,o.current.setAttribute("style","width: ".concat(t/window.devicePixelRatio,"px; max-width: 100%"))}}),[i.current]),Object(n.useEffect)((function(){l.current.src=s,l.current.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d"),a=u.current.getContext("2d");if(t&&a){var r=T.width,n=T.height;e.width=r,e.height=n;var c=t.createPattern(l.current,"repeat");if(c){t.fillStyle=c,t.fillRect(0,0,r,n);for(var i=t.getImageData(0,0,r,n),o=i.data,f=[],d=[],s=_([1,3,6]),h=[0,0,1],g=0;g<o.length;g+=4){var p=_([o[g]-128,o[g+1]-128,o[g+2]-128]),v=k(p,s);f.push(v);for(var b=[],j=0;j<3;j++)b[j]=2*v*(p[j]-s[j]);var m=k(_(b),h);d.push(Math.pow(m,3)),o[g]=Math.floor(255*v),o[g+1]=Math.floor(255*v),o[g+2]=Math.floor(255*v)}S(f),P(d),u.current.width=r,u.current.height=n,a.putImageData(i,0,0),a.lineCap="round";for(var O=a.getImageData(0,0,r,n),x=O.data,w=0;w<x.length;w+=4)x[w+3]=0;a.putImageData(O,0,0,0,0,r,n)}}}}),[T]),Object(n.useEffect)((function(){f.current.src=h,f.current.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d");if(t){var a=T.width,r=T.height;e.width=a,e.height=r;var n=t.createPattern(f.current,"repeat");if(n){t.fillStyle=n,t.fillRect(0,0,a,r);var c=t.getImageData(0,0,a,r);m(c.data)}}}}),[T]),Object(n.useEffect)((function(){o.current.onmousemove=function(e){if(W){var t=o.current.getBoundingClientRect(),a=o.current.width/t.width,r=o.current.height/t.height;Z((function(n){return{prev:n.current,current:{x:(e.clientX-t.left)*a,y:(e.clientY-t.top)*r}}}))}},o.current.ontouchmove=function(e){if(e.preventDefault(),W){var t=o.current.getBoundingClientRect(),a=o.current.width/t.width,r=o.current.height/t.height,n=e.touches[0].clientX,c=e.touches[0].clientY;Z((function(e){return{prev:e.current,current:{x:(n-t.left)*a,y:(c-t.top)*r}}}))}}}),[o.current,W]),Object(n.useEffect)((function(){var e=function(e){e.preventDefault(),A(!0)};o.current.onmousedown=e,o.current.ontouchstart=e;var t=function(e){e.preventDefault(),A(!1),Z((function(e){return{prev:e.current,current:null}}))};o.current.onmouseup=t,o.current.ontouchend=t}),[]),Object(n.useEffect)((function(){var e=o.current.getContext("2d");if(0!==y.length&&j&&e){for(var t=T.width,a=T.height,r=e.getImageData(0,0,t,a),n=r.data,c=0;c<j.length/4;c++)j[4*c]=j[4*c]*y[c],j[4*c+1]=j[4*c+1]*y[c],j[4*c+2]=j[4*c+2]*y[c];for(var i=0;i<j.length;i++)n[i]=j[i];e.putImageData(r,0,0,0,0,t,a)}}),[y,j]),Object(n.useEffect)((function(){var e=u.current.getContext("2d"),t=o.current.getContext("2d");if(e&&t&&z.prev&&z.current&&j){var a=z.prev,r=z.current;D(a,r,X/4).forEach((function(t){var a=t.x,r=t.y,n=e.createRadialGradient(a,r,0,a,r,X);n.addColorStop(0,L),n.addColorStop(.5,b()(L,.3)),n.addColorStop(1,b()(L,0)),e.fillStyle=n,e.fillRect(a-X,r-X,2*X,2*X)}));for(var n=a.x,c=a.y,i=r.x,l=r.y,f=(n<i?n:i)-X,d=(c<l?c:l)-X,s=(n<i?i:n)-f+X,h=(c<l?l:c)-d+X,g=T.width,p=T.height,v=e.getImageData(0,0,g,p).data,m=t.getImageData(0,0,g,p),O=m.data,x=0;x<s*h;x++){var w=f+x%s+(d+Math.floor(x/s))*g,C=v[4*w+3]/255,_=C*I[w]*2e3,k={r:C*(8+v[4*w])*y[w],g:C*(8+v[4*w+1])*y[w],b:C*(8+v[4*w+2])*y[w]};O[4*w]=k.r+_+(1-C)*j[4*w],O[4*w+1]=k.g+_+(1-C)*j[4*w+1],O[4*w+2]=k.b+_+(1-C)*j[4*w+2]}t.putImageData(m,0,0,0,0,g,p)}}),[u.current,j,o.current,z]),Object(r.jsxs)("div",{className:w.a.panel,children:[Object(r.jsx)("div",{className:w.a.canvasContainer,ref:i}),Object(r.jsx)(C,{strokeColor:L,setStrokeColor:q,strokeWidth:X,setStrokeWidth:Y,clearDrawing:function(){if(j){var e=T.width,t=T.height,a=u.current.getContext("2d"),r=o.current.getContext("2d");if(a&&r){for(var n=a.getImageData(0,0,e,t),c=n.data,i=r.getImageData(0,0,e,t),l=i.data,f=0;f<c.length;f++)c[f]=0;a.putImageData(n,0,0,0,0,e,t);for(var d=0;d<j.length;d++)l[d]=j[d];r.putImageData(i,0,0,0,0,e,t)}}},saveDrawing:function(){var e=document.createElement("a");e.href=o.current.toDataURL("image/png").replace("data:image/png","data:application/octet-stream"),e.download="drawing.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}})]})},S=function(){return Object(r.jsxs)(f.a,{className:l.a.appContainer,children:[Object(r.jsx)("h1",{className:l.a.appHeader,children:"Wall Canvas"}),Object(r.jsx)(y,{canvasWidth:screen.width>800?800:screen.width,canvasHeight:screen.height-100>600?600:screen.height-100})]})};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(S,{})}),document.getElementById("root"))},51:function(e,t,a){e.exports={appContainer:"App_appContainer__19Cyd",appHeader:"App_appHeader__iN9K5"}},93:function(e,t,a){}},[[205,1,2]]]);
//# sourceMappingURL=main.b879b14f.chunk.js.map