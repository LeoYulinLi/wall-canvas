(this["webpackJsonpwall-canvas"]=this["webpackJsonpwall-canvas"]||[]).push([[0],{108:function(e,t,r){},222:function(e,t,r){"use strict";r.r(t);var a=r(4),n=r(0),c=r.n(n),i=r(18),o=r.n(i),l=(r(108),r(39)),s=r.n(l),u=r(225),d=r(14),h=r.p+"static/media/Tileable_Red_Brick_Texturise_NORMAL.13f500e2.jpg",f=r.p+"static/media/Tileable_Red_Brick_Texturise.fdc6adbf.jpg",j=r(95),b=r.n(j),p=r(62),g=r.n(p),x=r(63),v=r.n(x),O=r(26),m=r.n(O),w=r(102),C=r(227),_=r(228),k=r(226),y=function(e){var t=e.strokeColor,r=e.setStrokeColor,c=e.strokeWidth,i=e.setStrokeWidth,o=e.clearDrawing,l=e.saveDrawing,s=Object(n.useState)(!1),u=Object(d.a)(s,2),h=u[0],f=u[1];return Object(a.jsxs)("div",{className:m.a.palette,children:[Object(a.jsx)(w.a,{onChange:function(e){return r(e.hex)},color:t,colors:["#000000","#ffffff","#d00000","#ea8c00","#eac300","#00a000","#b7ea00","#0000c0","#00c7ea","#7500ea","#bf00ea","#ea00b0","#555555","#d2d2d2","#ffc6c6","#ffd999","#fff0ab","#adffad","#ecffb2","#9ad7ff","#9affe8","#9d9aff","#e4a8f3","#ff9ae6"],className:m.a.colorPicker}),Object(a.jsx)(C.a,{children:Object(a.jsxs)(C.a.Group,{controlId:"strokeWidth",className:m.a.strokePicker,children:[Object(a.jsxs)(C.a.Label,{children:["Stroke Width: ",c]}),Object(a.jsx)(C.a.Control,{type:"range",min:5,max:60,custom:!0,value:c,onChange:function(e){return i(+e.target.value)}})]})}),Object(a.jsxs)("div",{className:m.a.control,children:[Object(a.jsx)(_.a,{type:"button",variant:"danger",onClick:function(){return f(!0)},children:"Clear Drawing"}),Object(a.jsx)(_.a,{type:"button",onClick:l,children:"Save Drawing"})]}),Object(a.jsxs)(k.a,{show:h,onHide:function(){return f(!1)},centered:!0,children:[Object(a.jsx)(k.a.Header,{closeButton:!0,children:Object(a.jsx)(k.a.Title,{children:"Clear Drawing"})}),Object(a.jsx)(k.a.Body,{children:"Are you sure you want to clear the current drawing? This action cannot be undone."}),Object(a.jsxs)(k.a.Footer,{children:[Object(a.jsx)(_.a,{variant:"secondary",onClick:function(){return f(!1)},children:"Close"}),Object(a.jsx)(_.a,{variant:"danger",onClick:function(){o(),f(!1)},children:"Clear Drawing"})]})]})]})},D=r(9);function S(e){var t=Math.sqrt(e.reduce((function(e,t){return e+t*t}),0));return e.map((function(e){return e/t}))}function P(e,t){for(var r=0,a=0;a<e.length;a++)r+=e[a]*t[a];return r}function M(e,t,r){for(var a=[],n=function(e,t){var r=t.x-e.x,a=t.y-e.y;return Math.sqrt(r*r+a*a)}(e,t),c=function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)}(e,t),i=e.x,o=e.y,l=0;l<n;l+=r)a.push({x:i+Math.sin(c)*l,y:o+Math.cos(c)*l});return a}var R=function(e){var t=window.devicePixelRatio,r=e.canvasWidth,c=e.canvasHeight,i=Object(n.useRef)(null),o=Object(n.useRef)(document.createElement("canvas")),l=Object(n.useRef)(document.createElement("canvas")),s=Object(n.useRef)(document.createElement("img")),u=Object(n.useRef)(document.createElement("img")),j=Object(n.useState)(null),p=Object(d.a)(j,2),x=p[0],O=p[1],m=Object(n.useState)([]),w=Object(d.a)(m,2),C=w[0],_=w[1],k=Object(n.useState)([]),R=Object(d.a)(k,2),I=R[0],E=R[1],B=Object(n.useState)(!1),H=Object(d.a)(B,2),N=H[0],A=H[1],W=Object(n.useState)({width:Math.floor(r*t),height:Math.floor(c*t)}),T=Object(d.a)(W,2),L=T[0],F=(T[1],Object(n.useState)("#9AFFE8")),G=Object(d.a)(F,2),Y=G[0],q=G[1],U=Object(n.useState)(40),X=Object(d.a)(U,2),J=X[0],K=X[1],V=Object(n.useState)({prev:null,current:null}),Z=Object(d.a)(V,2),z=Z[0],Q=Z[1],$=Object(n.useCallback)(b()(Q,20),[]);return Object(n.useEffect)((function(){if(i.current){var e;null===(e=i.current)||void 0===e||e.appendChild(o.current);var r=L.width,a=L.height;o.current.height=a,o.current.width=r,o.current.setAttribute("style","width: ".concat(r/t,"px; max-width: 100%"))}}),[i.current]),Object(n.useEffect)((function(){s.current.src=h,s.current.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d"),r=l.current.getContext("2d");if(t&&r){var a=L.width,n=L.height;e.width=a,e.height=n;var c=t.createPattern(s.current,"repeat");if(c){t.fillStyle=c,t.fillRect(0,0,a,n);for(var i=t.getImageData(0,0,a,n),o=i.data,u=[],d=[],h=S([1,3,6]),f=[0,0,1],j=0;j<o.length;j+=4){var b=S([o[j]-128,o[j+1]-128,o[j+2]-128]),p=P(b,h);u.push(p);for(var g=[],x=0;x<3;x++)g[x]=2*p*(b[x]-h[x]);var v=P(S(g),f);d.push(Math.pow(v,3)),o[j]=Math.floor(255*p),o[j+1]=Math.floor(255*p),o[j+2]=Math.floor(255*p)}_(u),E(d),l.current.width=a,l.current.height=n,r.putImageData(i,0,0),r.lineCap="round";for(var O=r.getImageData(0,0,a,n),m=O.data,w=0;w<m.length;w+=4)m[w+3]=0;r.putImageData(O,0,0,0,0,a,n)}}}}),[L]),Object(n.useEffect)((function(){u.current.src=f,u.current.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d");if(t){var r=L.width,a=L.height;e.width=r,e.height=a;var n=t.createPattern(u.current,"repeat");if(n){t.fillStyle=n,t.fillRect(0,0,r,a);var c=t.getImageData(0,0,r,a);O(c.data)}}}}),[L]),Object(n.useEffect)((function(){o.current.onpointermove=function(e){if(e.preventDefault(),N){var t=o.current.getBoundingClientRect(),r=o.current.width/t.width,a=o.current.height/t.height;$((function(n){return{prev:n.current,current:{x:Math.floor((e.clientX-t.left)*r),y:Math.floor((e.clientY-t.top)*a)}}}))}},o.current.ontouchmove=function(e){if(e.preventDefault(),N){var t=o.current.getBoundingClientRect(),r=o.current.width/t.width,a=o.current.height/t.height,n=e.touches[0].clientX,c=e.touches[0].clientY;$((function(e){return{prev:e.current,current:{x:Math.floor((n-t.left)*r),y:Math.floor((c-t.top)*a)}}}))}}}),[o.current,N]),Object(n.useEffect)((function(){o.current.onpointerdown=function(e){e.preventDefault(),A(!0)};var e=function(e){e.preventDefault(),A(!1),$((function(e){return{prev:e.current,current:null}}))};o.current.ontouchend=e,o.current.onpointerup=e}),[]),Object(n.useEffect)((function(){var e=o.current.getContext("2d");if(0!==C.length&&x&&e){for(var t=L.width,r=L.height,a=e.getImageData(0,0,t,r),n=a.data,c=0;c<x.length/4;c++)x[4*c]=x[4*c]*C[c],x[4*c+1]=x[4*c+1]*C[c],x[4*c+2]=x[4*c+2]*C[c];for(var i=0;i<x.length;i++)n[i]=x[i];e.putImageData(a,0,0,0,0,t,r)}}),[C,x]),Object(n.useEffect)((function(){var e=l.current.getContext("2d"),t=o.current.getContext("2d");if(e&&t&&z.prev&&z.current&&x){var r=z.prev,a=z.current;M(r,a,J/4).forEach((function(t){var r=t.x,a=t.y,n=e.createRadialGradient(r,a,0,r,a,J);n.addColorStop(0,Y),n.addColorStop(.5,g()(Y,.3)),n.addColorStop(1,g()(Y,0)),e.fillStyle=n,e.fillRect(r-J,a-J,2*J,2*J)}));for(var n=r.x,c=r.y,i=a.x,s=a.y,u=(n<i?n:i)-J,d=(c<s?c:s)-J,h=(n<i?i:n)-u+J,f=(c<s?s:c)-d+J,j=L.width,b=L.height,p=e.getImageData(0,0,j,b).data,v=t.getImageData(0,0,j,b),O=v.data,m=0;m<h*f;m++){var w=u+m%h+(d+Math.floor(m/h))*j,_=p[4*w+3]/255,k=_*I[w]*2e3,y={r:_*(8+p[4*w])*C[w],g:_*(8+p[4*w+1])*C[w],b:_*(8+p[4*w+2])*C[w]};O[4*w]=y.r+k+(1-_)*x[4*w],O[4*w+1]=y.g+k+(1-_)*x[4*w+1],O[4*w+2]=y.b+k+(1-_)*x[4*w+2]}t.putImageData(v,0,0,0,0,j,b)}}),[l.current,x,o.current,z]),Object(a.jsxs)("div",{className:v.a.panel,children:[Object(a.jsx)("div",{className:v.a.canvasContainer,ref:i}),Object(a.jsx)(y,{strokeColor:Y,setStrokeColor:q,strokeWidth:J,setStrokeWidth:K,clearDrawing:function(){if(x){var e=L.width,t=L.height,r=l.current.getContext("2d"),a=o.current.getContext("2d");if(r&&a){for(var n=r.getImageData(0,0,e,t),c=n.data,i=a.getImageData(0,0,e,t),s=i.data,u=0;u<c.length;u++)c[u]=0;r.putImageData(n,0,0,0,0,e,t);for(var d=0;d<x.length;d++)s[d]=x[d];a.putImageData(i,0,0,0,0,e,t)}}},saveDrawing:function(){var e=document.createElement("a");e.href=o.current.toDataURL("image/png").replace("data:image/png","data:application/octet-stream"),e.download="drawing.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}),Object(a.jsx)(D.a,{message:"Your changes will not be saved. Are you sure you want to navigate away?"})]})},I=r(21),E=function(){return Object(a.jsxs)(u.a,{className:s.a.appContainer,children:[Object(a.jsxs)("div",{className:s.a.appHeader,children:[Object(a.jsx)("h1",{children:"Wall Canvas"}),Object(a.jsx)("p",{children:"A Graffiti Wall Canvas where Paints Look Like Actual Paints"}),Object(a.jsxs)("ul",{className:s.a.nav,children:[Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://github.com/LeoYulinLi/wall-canvas",target:"_blank",rel:"noopener noreferrer",children:"Source Code and Behind the Scene"})}),Object(a.jsx)("li",{children:Object(a.jsx)(I.b,{to:"/credits",children:"Credits"})})]})]}),Object(a.jsx)(R,{canvasWidth:screen.width>800?800:screen.width,canvasHeight:screen.height-100>600?600:screen.height-100})]})},B=r(67),H=r.n(B),N=function(){return Object(a.jsxs)(u.a,{className:H.a.creditContainer,children:[Object(a.jsxs)("div",{className:H.a.creditHeader,children:[Object(a.jsx)("h1",{children:"Credits / Resources Used"}),Object(a.jsx)(I.b,{to:"/",children:"Go back to Home Page"})]}),Object(a.jsxs)("ul",{children:[Object(a.jsxs)("li",{children:["Brick Wall: ",Object(a.jsx)("a",{href:"http://www.texturise.club/2014/03/tileable-red-brick-texture-maps.html",children:"Tileable Red Brick Texture + (Maps)"})]}),Object(a.jsxs)("li",{children:["Favicon: Icons made by ",Object(a.jsx)("a",{href:"https://www.flaticon.com/authors/pixel-perfect",title:"Pixel perfect",children:"Pixel perfect"})," from ",Object(a.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(a.jsxs)("li",{children:["Bootstrap Theme: ",Object(a.jsx)("a",{href:"https://bootswatch.com/sketchy",children:"Bootswatch Sketchy"})]}),Object(a.jsxs)("li",{children:["Brush Style: ",Object(a.jsx)("a",{href:"http://perfectionkills.com/exploring-canvas-drawing-techniques/",children:"Exploring canvas drawing techniques"})]}),Object(a.jsxs)("li",{children:["Reflection Model: ",Object(a.jsx)("a",{href:"https://en.wikipedia.org/wiki/Phong_reflection_model",children:"Phong reflection model"})]})]})]})};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(I.a,{children:Object(a.jsxs)(D.d,{children:[Object(a.jsx)(D.b,{exact:!0,path:"/",component:E}),Object(a.jsx)(D.b,{exact:!0,path:"/credits",component:N})]})})}),document.getElementById("root"))},26:function(e,t,r){e.exports={palette:"Palette_palette__3tLi0",strokePicker:"Palette_strokePicker__25ejT",colorPicker:"Palette_colorPicker__1HHU9",control:"Palette_control__2I8aI"}},39:function(e,t,r){e.exports={appContainer:"App_appContainer__19Cyd",appHeader:"App_appHeader__iN9K5",nav:"App_nav__2XUeY"}},63:function(e,t,r){e.exports={panel:"Panel_panel__3VGf8",canvasContainer:"Panel_canvasContainer__3gM-_"}},67:function(e,t,r){e.exports={creditContainer:"Credits_creditContainer__1ZAnL",creditHeader:"Credits_creditHeader__1FGRR"}}},[[222,1,2]]]);
//# sourceMappingURL=main.324c33ff.chunk.js.map